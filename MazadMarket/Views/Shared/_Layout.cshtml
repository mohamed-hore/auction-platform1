@using Microsoft.AspNet.Identity
@using MazadMarket.Resourses
<!doctype html>
<!--[if IE 7 ]> <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <base href="http://localhost:60442/" />
    <link rel="shortcut icon" href="images/favicon.ico">
    <title>@ViewBag.Title</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
        <![endif]-->
    @*<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Yellowtail%7COpen%20Sans%3A400%2C300%2C600%2C700%2C800" media="screen" />*@
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+7J5F5O3SHEF6j5o7jimq9LyEJKVm6f5a5zW5f5O3SHEF6j5o" crossorigin="anonymous">

    <link href="~/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
    <link rel="stylesheet" href="~/css/flexslider.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="~/css/jquery.bxslider.css" type="text/css" media="screen" />
    <link href="~/css/jquery.fancybox.css" rel="stylesheet">
    <link href="~/css/jquery.selectbox.css" rel="stylesheet">
    <link href="~/css/style.css" rel="stylesheet">
    <link href="~/css/mobile.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="~/css/settings.css" media="screen" />
    <link href="~/css/animate.min.css" rel="stylesheet">
    <link href="~/css/ts.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="~/js/jquery.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
   




    <script type="text/javascript" src="~/js/jquery.themepunch.tools.min.js"></script>
    <script type="text/javascript" src="~/js/jquery.themepunch.revolution.min.js"></script>
    <script type="text/javascript" src="~/js/wow.min.js"></script>


</head>

<body>
    <!--Header Start-->
    <header data-spy="affix" data-offset-top="1" class="clearfix">
        <section class="toolbar">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 left_bar">
                        <ul class="@Html.Raw(layout.loginMenuClass)">
                            @if (Request.IsAuthenticated)
                            {
                                using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                                {
                                    @Html.AntiForgeryToken()
                                    <li>
                                        @Html.ActionLink(layout.hello + User.Identity.GetUserName()  +  "!", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage" })
                                    </li>
                                    <li><a href="javascript:document.getElementById('logoutForm').submit()">@Html.Raw(layout.logout)</a></li>
                                    if (layout.lang == "ar")
                                    {
                                        <li><a href="#"><i class="fa fa-globe"></i>   @Html.ActionLink(layout.lang, "language", "Home", new { language = "en" }, null)       </a></li>

                                    }
                                    else
                                    {
                                        <li><a href="#"><i class="fa fa-globe"></i>   @Html.ActionLink(layout.lang, "language", "Home", new { language = "ar" }, null)       </a></li>
                                    }

                                }
                            }
                            else
                            {
                                <li>@Html.ActionLink(layout.register, "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>
                                <li>@Html.ActionLink(layout.login, "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>

                                if (layout.lang == "ar")
                                {
                                    <li><a href="#"><i class="fa fa-globe"></i>   @Html.ActionLink(layout.lang, "language", "Home", new { language = "en" }, null)       </a></li>

                                }
                                else
                                {
                                    <li><a href="#"><i class="fa fa-globe"></i>   @Html.ActionLink(layout.lang, "language", "Home", new { language = "ar" }, null)       </a></li>
                                }


                            }
                        </ul>

                        <span class="noti glyphicon glyphicon-bell"><span class="count">&nbsp;</span></span>
                        <div class="noti-content">
                            <div class="noti-top-arrow"></div>
                            <ul id="notiContent"></ul>
                        </div>


                    </div>
                    <div class="col-lg-6 ">
                        <ul class="@Html.Raw(layout.addressMenuClass)">
                            <li><a href="tel:18005670123"><i class="fa fa-phone"></i>@Html.Raw(layout.phoneNumner)   </a></li>
                            <li class="address"><a href="contact.html"><i class="fa fa-map-marker"></i> @Html.Raw(layout.address) </a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="toolbar_shadow"></div>
        </section>
        <div class="bottom-header">
            <div class="container">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="container-fluid">
                        <!-- Brand and toggle get grouped for better mobile display -->
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
                            <a class="navbar-brand" href="index.html"><span class="logo"><span class="primary_text">@Html.Raw(layout.appName) </span> <span class="secondary_text">@Html.Raw(layout.market) </span></span></a>
                        </div>

                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                            <ul class="@Html.Raw(layout.navBarMenuClass)">




                                <li id="home">@Html.ActionLink(layout.home, "Index", "Home")</li>
                                <li id="product">@Html.ActionLink(layout.products, "Indexs", "ProductsTypes")</li>
                                <li id="about">@Html.ActionLink(layout.aboutus, "About", "Home")</li>
                                <li id="contact">@Html.ActionLink(layout.contactus, "Contact", "Home")</li>

                                @if (User.IsInRole("Admin"))
                                {
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">@Html.Raw(layout.dashBoard) <b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li>@Html.ActionLink(layout.products, "Index", "Products")</li>
                                            <li>@Html.ActionLink(layout.approve, "Aprove", "Products")</li>
                                            <li>@Html.ActionLink(layout.reject, "Reject", "Products")</li>
                                            <li>@Html.ActionLink(layout.typeName, "Index", "ProductsTypes")</li>


                                        </ul>
                                    </li>
                                }
                                else
                                {
                                    if (User.Identity.IsAuthenticated)
                                    {
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dash Board <b class="caret"></b></a>
                                            <ul class="dropdown-menu">
                                                <li>@Html.ActionLink(layout.products, "Index", "Products")</li>


                                            </ul>
                                        </li>
                                    }
                                }

                            </ul>
                        </div>
                        <!-- /.navbar-collapse -->
                    </div>
                    <!-- /.container-fluid -->
                </nav>
            </div>
            <div class="header_shadow"></div>
        </div>
    </header>
    <!--Header End-->




    @RenderBody()



    <div class="clearfix"></div>
    <section class="copyright-wrap padding-bottom-10">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <div class="logo-footer margin-bottom-20 md-margin-bottom-20 sm-margin-bottom-10 xs-margin-bottom-20">
                        <a href="#">
                            <h1>@Html.Raw(layout.appName) </h1>
                            <span>@Html.Raw(layout.market) </span>
                        </a>
                    </div>
                    <p>@Html.Raw(layout.copyRight) </p>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                    <ul class="social margin-bottom-25 md-margin-bottom-25 sm-margin-bottom-20 xs-margin-bottom-20 xs-padding-top-10 clearfix">
                        <li><a class="sc-1" href="#"></a></li>
                        <li><a class="sc-2" href="#"></a></li>
                        <li><a class="sc-3" href="#"></a></li>
                        <li><a class="sc-5" href="#"></a></li>        
                        <li><a class="sc-8" href="#"></a></li>
                        <li><a class="sc-9" href="#"></a></li>
                        <li><a class="sc-10" href="#"></a></li>
                        <li><a class="sc-11" href="#"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <div class="back_to_top"> <img src="images/arrow-up.png" alt="scroll up" /> </div>
    <!-- Bootstrap core JavaScript -->
    @*<script src="js/retina.js"></script>*@
    <script type="text/javascript" src="js/jquery.parallax.js"></script>
    <script type="text/javascript" src="js/jquery.inview.min.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox.js"></script>
    <script src="js/modernizr.custom.js"></script>
    <script defer src="js/jquery.flexslider.js"></script>
    <script src="js/jquery.bxslider.js" type="text/javascript"></script>
    <script src="js/jquery.selectbox-0.2.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="js/jquery.easing.js"></script>


    @* Add Jquery Library *@
    @*<script src="~/Scripts/jquery-2.2.3.min.js"></script>*@
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="/signalr/hubs"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    @* Add css  *@


    @if (layout.lang == "ar")
    {
        <link href="~/css/bootstrap-rtl.css" rel="stylesheet" />
    }
    else
    {
        <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    }



    <style type="text/css">
        /*Added css for design notification area, you can design by your self*/
        /* COPY css content from youtube video description*/
        .noti-content {
            position: fixed;
            right: 40px;
            background: #e5e5e5;
            border-radius: 4px;
            top: 47px;
            width: 250px;
            display: none;
            border: 1px solid #9E988B;
        }

        ul#notiContent {
            max-height: 200px;
            overflow: auto;
            padding: 0px;
            margin: 0px;
            padding-left: 20px;
            z-index: 1000000;
        }

            ul#notiContent li {
                margin: 3px;
                padding: 6px;
                background: #fff;
            }

        .noti-top-arrow {
            border-color: transparent;
            border-bottom-color: #F5DEB3;
            border-style: dashed dashed solid;
            border-width: 0 8.5px 8.5px;
            position: absolute;
            right: 32px;
            top: -8px;
        }

        span.noti {
            color: white;
            margin: 15px;
            position: fixed;
            right: 40px;
            font-size: 18px;
            cursor: pointer;
        }

        span.count {
            position: relative;
            top: -3px;
        }
    </style>

    @* Add jquery code for Get Notification & setup signalr *@
    <script type="text/javascript">
        $(function () {
            // Click on notification icon for show notification
            $('span.noti').click(function (e) {
                e.stopPropagation();
                $('.noti-content').show();
                var count = "";
                count = $('span.count').html() || 0;
                //only load notification if not already loaded
                if (count == "New") {
                    updateNotification();
                    //updateNotificationAuc();
                }
                $('span.count', this).html('&nbsp;');
            })
            // hide notifications
            $('html').click(function () {
                $('.noti-content').hide();
            })
            // update notification
            function updateNotification() {
                $('#notiContent').empty();
                $('#notiContent').append($('<li>Loading...</li>'));
                $.ajax({
                    type: 'GET',
                    url: '/home/GetNotification',
                    success: function (response) {
                        $('#notiContent').empty();
                        if (response.length == 0) {
                            $('#notiContent').append($('<li>No data available</li>'));
                        }
                        $.each(response, function (index, value) {
                            $('#notiContent').append($('<li>' + value.notificationType + ':' + value.notification + '</li>'));
                        });
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });

            }



            //}


            // update notification count
            function updateNotificationCount() {
                var count = 0;
                console.log("a" + count);
                count = parseInt($('span.count').html()) || 0;
                console.log("b" + count);
                count++;
                console.log("c" + count);
              
                console.log("d" + count);
                $('span.count').html("New");
                console.log("e" + count);
            }
            // signalr js code for start hub and send receive notification
            var notificationHub = $.connection.notificationHub;
            $.connection.hub.start().done(function () {
                console.log('Notification hub started');
            });
            //signalr method for push server message to client
            notificationHub.client.notify = function (message) {
                if (message && message.toLowerCase() == "added") {
                    updateNotificationCount();
                }
            }
        })
    </script>





</body>
</html>